---
export const prerender = true;
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allTools = (await getCollection('tools'))
  .sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99));

const categories = [
  { id: 'all', label: 'ì „ì²´', emoji: 'ğŸ”¥' },
  { id: 'ê¸€ì“°ê¸°Â·ì±—ë´‡', label: 'ê¸€ì“°ê¸°Â·ì±—ë´‡', emoji: 'âœï¸' },
  { id: 'ì´ë¯¸ì§€ ìƒì„±', label: 'ì´ë¯¸ì§€ ìƒì„±', emoji: 'ğŸ¨' },
  { id: 'ì˜ìƒÂ·ìŒì„±', label: 'ì˜ìƒÂ·ìŒì„±', emoji: 'ğŸ¬' },
  { id: 'ì—…ë¬´Â·ìƒì‚°ì„±', label: 'ì—…ë¬´Â·ìƒì‚°ì„±', emoji: 'ğŸ“Š' },
  { id: 'ì½”ë”©Â·ê°œë°œ', label: 'ì½”ë”©Â·ê°œë°œ', emoji: 'ğŸ’»' },
  { id: 'ë””ìì¸', label: 'ë””ìì¸', emoji: 'ğŸ–¼ï¸' },
  { id: 'ë²ˆì—­Â·í•™ìŠµ', label: 'ë²ˆì—­Â·í•™ìŠµ', emoji: 'ğŸŒ' },
];

const difficultyColor = (d: string) => {
  if (d.includes('ì´ˆë³´')) return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
  if (d.includes('ì¤‘ê¸‰')) return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
  return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
};
---

<Layout title="AI ë„êµ¬ ë””ë ‰í† ë¦¬" description="ì¼ë°˜ì¸ë„ ë°”ë¡œ ì“¸ ìˆ˜ ìˆëŠ” AI ë„êµ¬ë¥¼ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤. ë¬´ë£ŒÂ·ìœ ë£Œ, í•œêµ­ì–´ ì§€ì› ì—¬ë¶€, ë‚œì´ë„ê¹Œì§€ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”.">
  <div class="max-w-6xl mx-auto px-4 py-12">

    <!-- í—¤ë” -->
    <div class="text-center mb-10">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-3">
        ğŸ› ï¸ AI ë„êµ¬ ë””ë ‰í† ë¦¬
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        ì¼ë°˜ì¸ë„ ë°”ë¡œ ì“¸ ìˆ˜ ìˆëŠ” AI ë„êµ¬ë¥¼ ëª¨ì•˜ìŠµë‹ˆë‹¤.<br class="hidden md:block" />
        ì¹´í…Œê³ ë¦¬Â·ê°€ê²©Â·í•œêµ­ì–´ ì§€ì›Â·ë‚œì´ë„ê¹Œì§€ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”.
      </p>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
    <div class="flex flex-wrap justify-center gap-2 mb-10" id="category-filter">
      {categories.map(cat => (
        <button
          data-category={cat.id}
          class:list={[
            'filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all border',
            cat.id === 'all'
              ? 'bg-blue-600 text-white border-blue-600'
              : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:border-blue-400'
          ]}
        >
          {cat.emoji} {cat.label}
        </button>
      ))}
    </div>

    <!-- ë„êµ¬ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="tools-grid">
      {allTools.map(tool => (
        <a
          href={`/tools/${tool.id}/`}
          data-cat={tool.data.category}
          class="tool-card group block bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-blue-400 dark:hover:border-blue-500 transition-all"
        >
          <div class="flex items-start justify-between mb-3">
            <h2 class="text-lg font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
              {tool.data.name}
            </h2>
            {tool.data.featured && (
              <span class="text-xs bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 px-2 py-0.5 rounded-full">ì¶”ì²œ</span>
            )}
          </div>

          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2">
            {tool.data.description}
          </p>

          <div class="flex flex-wrap gap-2 mb-3">
            <span class="text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-md">
              {tool.data.category}
            </span>
            <span class:list={['text-xs px-2 py-1 rounded-md', difficultyColor(tool.data.difficulty)]}>
              {tool.data.difficulty}
            </span>
          </div>

          <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
            <span>{tool.data.price}</span>
            <span>
              í•œêµ­ì–´ {tool.data.koreanSupport ? 'â­•' : 'âŒ'}
            </span>
          </div>
        </a>
      ))}
    </div>

    <!-- ë„êµ¬ ìˆ˜ í‘œì‹œ -->
    <div class="text-center mt-8 text-sm text-gray-500 dark:text-gray-400">
      ì´ <strong id="tool-count">{allTools.length}</strong>ê°œ ë„êµ¬
    </div>

  </div>
</Layout>

<script>
  const buttons = document.querySelectorAll('.filter-btn');
  const cards = document.querySelectorAll('.tool-card');
  const countEl = document.getElementById('tool-count');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const cat = btn.getAttribute('data-category');

      // ë²„íŠ¼ ìŠ¤íƒ€ì¼
      buttons.forEach(b => {
        b.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
        b.classList.add('bg-white', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-gray-200', 'dark:border-gray-700');
      });
      btn.classList.add('bg-blue-600', 'text-white', 'border-blue-600');
      btn.classList.remove('bg-white', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-gray-200', 'dark:border-gray-700');

      // ì¹´ë“œ í•„í„°
      let visible = 0;
      cards.forEach(card => {
        if (cat === 'all' || card.getAttribute('data-cat') === cat) {
          (card as HTMLElement).style.display = '';
          visible++;
        } else {
          (card as HTMLElement).style.display = 'none';
        }
      });
      if (countEl) countEl.textContent = String(visible);
    });
  });
</script>
